# The Impact of University Growth on Housing Affordability in Charlottesville, Virginia
## A DS 4002 Case Study by Elizabeth Hunter
This repository contains the study, deliverables, data, code, and reference materials necessary to complete the Case Study.

## Hook and Rubric Documents 
The hook document outlining the case study is the file labeled [Hook-The Impact of University Growth on Housing Affordability.pdf. ](https://github.com/mwm6nq/DS4002-CS2/blob/main/Hook-The%20Impact%20of%20University%20Growth%20on%20Housing%20Affordability.pdf)The rubric [Rubric-The Impact of University Growth on Housing Affordability](https://github.com/mwm6nq/DS4002-CS2/blob/main/Rubric-The%20Impact%20of%20University%20Growth%20on%20Housing%20Affordability.pdf) outlines the formatting, submission requirements, and final deliverables for this assignment. Reference both documents throughout the case study to guarantee success on the assignment.

## Technical Materials
This includes two subfolders containing the data and articles for this project. It also contains the final script, commented code.

### Data
The necessary data is located in the "data" folder within the "technical materials". The [data appendix](https://github.com/mwm6nq/DS4002-CS2/blob/main/Technical%20Materials/data/Data%20Appendix%20.pdf) file will help you walk through the data sets provided. It includes cleaned datasets (merged_df_clean.csv and cleaned_housing.csv) and the original datasets downloaded from https://opendata.charlottesville.org/datasets, https://www.bls.gov/cpi/data.htm, and https://ira.virginia.edu/university-data-home/enrollment . 

### Articles
This includes two motivational articles about the background of higher education institutions' impact on college towns and an article explaining the technical work of the CPI and why it was used in our code for better analysis. 

## Steps to compelete this case study 
To begin, open a new folder in Jupyter Lab called “Charlottesville Housing” and create a new Jupyter Notebook using Python 3.10. In the first cell, import the necessary libraries for the project: pandas, numpy, matplotlib.pyplot for data manipulation and visualization, and tools from sklearn, including LinearRegression, r2_score, train_test_split, tree, and RandomForestRegressor for modeling.
Next, gather the data files. Download Real_Estate_(Residential_Details).csv and Real_Estate_(Sales).csv from the https://opendata.charlottesville.org/datasets, or locate them in the “data” folder inside the “Technical Materials” section of the repo. Create a subfolder called “time data” inside your “Charlottesville Housing” folder and upload both CSV files there. Also, download the CPI.csv file from the U.S. Bureau of Labor Statistics and the UVA Enrollment Data.csv from the UVA Data Digest. Upload these two files into the main “Charlottesville Housing” folder. Both are also available in the same “data” folder in the repo.
Begin your analysis by merging the two real estate datasets using the ParcelNumber column to create a single dataframe called merged_df. Follow the code in the “Technical Materials” folder to clean the dataset: keep only the necessary columns, drop rows with missing or invalid values, and remove entries with sale amounts of zero or unrealistic bedroom data. Then convert the Bedrooms column to integers, filter for homes built between 1950 and 2025, extract the year of sale as a new column (SaleDateYr), and convert letter-based property grades into a numeric 10-point scale.
Next, import the UVA enrollment data into the “Charlottesville Housing” folder and create a dataframe called enrollment_data in the notebook. Clean this dataset by ensuring the Year and Total Enrollment columns are numeric and have no missing values. Then merge it with your cleaned housing data using the SaleDateYr column to add enrollment context to each home sale.
Then, load the CPI.csv into the “Charlottesville Housing” folder and create a dataframe called df_CPI. Convert the DATE column to a datetime format, extract the two-digit year, and then convert it to a full four-digit year (SaleDateYr). Drop the temporary year column and calculate the average CPI for each year, creating a cleaned CPI dataframe (df_CPI_clean). Merge this CPI data with your housing dataset on SaleDateYr. Retrieve the CPI value for the year 2024 and use it to adjust each home’s sale amount to reflect 2024 dollars using the formula: SaleAmount_2024 = SaleAmount * (CPI_2024 / CPI_Avg).
After adjusting for inflation, drop any rows with missing SaleAmount_2024 values, convert this column to integers, and remove any duplicates that may have been introduced. Calculate Z-scores to identify and remove outliers, keeping only records with values within ±3 standard deviations. Save this final cleaned, merged, and inflation-adjusted dataset as SaleAmount_2024_cleaned.csv, and refer to it in a new dataframe called df_filtered. If you'd prefer to skip all the cleaning and merging steps, you can directly load the already prepared SaleAmount_2024_cleaned.csv from the “data” folder in the “Technical Materials” folder from the repo.
With your data prepared, begin exploring the relationships between various housing features and the inflation-adjusted sale price. Create bar charts to visualize how average sale prices vary by number of bedrooms, home grade, year built, and year of sale. Use a scatterplot to examine the relationship between square footage and sale price, adding horizontal and vertical lines to show average values.
To understand the impact of UVA’s growth, analyze the relationship between total enrollment and housing prices using a scatterplot and a simple linear regression. Then, build predictive models. Start with a single decision tree using features like bedrooms, year built, square footage, grade, and total enrollment. Improve accuracy using bootstrap aggregation (bagging), training 1,000 decision trees and averaging their predictions. Finally, fit a Random Forest Regressor using all predictors. To evaluate the role of UVA enrollment alone, rerun the model using only Total Enrollment as the predictor and compare performance.
